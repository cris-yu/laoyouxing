<view class="child-home">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-input">
      <icon type="search" size="16" color="#999"></icon>
      <input placeholder="æœç´¢ç›®çš„åœ°" placeholder-class="search-placeholder" />
    </view>
  </view>

  <!-- ç­›é€‰æ  -->
  <view class="filter-bar">
    <picker mode="selector" range="{{departureCities}}" bindchange="onDepartureCityChange">
      <view class="filter-item">
        <text>{{selectedCity || 'å‡ºå‘åŸå¸‚'}}</text>
        <icon type="success" size="12" wx:if="{{selectedCity}}"></icon>
      </view>
    </picker>
    <picker mode="date" bindchange="onDateChange">
      <view class="filter-item">
        <text>{{selectedDate || 'å‡ºå‘æ—¥æœŸ'}}</text>
        <icon type="success" size="12" wx:if="{{selectedDate}}"></icon>
      </view>
    </picker>
    <picker mode="selector" range-key="label" range="{{intensityOptions}}" bindchange="onIntensityChange">
      <view class="filter-item">
        <text>{{selectedIntensityText || 'è¡Œç¨‹å¼ºåº¦'}}</text>
        <icon type="success" size="12" wx:if="{{selectedIntensity}}"></icon>
      </view>
    </picker>
  </view>

  <!-- äº§å“åˆ—è¡¨ -->
  <scroll-view scroll-y class="product-list" refresher-enabled="{{true}}" refresher-triggered="{{refreshing}}" bindrefresherrefresh="onRefresh">
    <view class="product-card" wx:for="{{products}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
      <image class="product-cover" src="{{item.coverImage}}" mode="aspectFill"></image>
      <view class="product-info">
        <text class="product-name">{{item.name}}</text>
        <view class="product-tags">
          <text class="tag tag-primary" wx:for="{{item.tags}}" wx:key="index" wx:for-item="tag">{{tag}}</text>
        </view>
        <view class="product-meta">
          <text class="meta-item">{{item.days}}å¤©</text>
          <text class="meta-item">{{item.departureCity}} - {{item.destinationCity}}</text>
        </view>
        <view class="product-footer">
          <view class="price">
            <text class="price-label">èµ·</text>
            <text class="price-value">Â¥{{item.priceFrom}}</text>
          </view>
          <view class="suitable-tag">
            <text class="suitable-text">é€‚è€åŒ–</text>
            <text class="intensity-badge">{{item.intensity === 'low' ? 'è½»æ¾' : item.intensity === 'medium' ? 'é€‚ä¸­' : 'è¾ƒé«˜'}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty" wx:if="{{!loading && products.length === 0}}">
      <text class="empty-icon">ğŸ“­</text>
      <text class="empty-text">æš‚æ— åˆé€‚çš„çº¿è·¯</text>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading" wx:if="{{loading}}">
      <text>åŠ è½½ä¸­...</text>
    </view>
  </scroll-view>
</view>
