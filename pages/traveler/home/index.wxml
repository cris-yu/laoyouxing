<scroll-view scroll-y class="traveler-home">
  <!-- é¡¶éƒ¨æ¬¢è¿ä¿¡æ¯ -->
  <view class="welcome-header">
    <text class="welcome-text">æ‚¨å¥½ï¼Œ{{travelerName}}</text>
    <text class="trip-name">{{tripInfo.productName}}</text>
  </view>

  <!-- ä»Šæ—¥è¡Œç¨‹å¡ç‰‡ -->
  <view class="today-card card">
    <view class="card-header">
      <text class="card-title">ğŸ“… ä»Šæ—¥è¡Œç¨‹</text>
      <text class="today-date">{{tripInfo.todayTitle}}</text>
    </view>

    <!-- é›†åˆä¿¡æ¯ -->
    <view class="gather-info" wx:if="{{tripInfo.guide}}">
      <view class="info-row">
        <text class="info-label">å¯¼æ¸¸ï¼š</text>
        <text class="info-value">{{tripInfo.guide.name}}</text>
        <button class="btn-call" bindtap="callGuide">
          <icon type="success" size="14" color="#1AAD19"></icon>
          <text>è”ç³»å¯¼æ¸¸</text>
        </button>
      </view>
      <view class="info-row">
        <text class="info-label">å¯¼æ¸¸ç”µè¯ï¼š</text>
        <text class="info-value phone">{{tripInfo.guide.phone}}</text>
      </view>
    </view>

    <view class="divider"></view>

    <!-- ä»Šæ—¥æ—¶é—´è½´ -->
    <view class="timeline">
      <view 
        class="timeline-item {{index === currentSegmentIndex ? 'active' : ''}}" 
        wx:for="{{tripInfo.todaySegments}}" 
        wx:key="id"
      >
        <view class="timeline-dot"></view>
        <view class="timeline-content">
          <view class="timeline-time">{{item.time}}</view>
          <view class="timeline-title">{{item.title}}</view>
          <view class="timeline-desc">{{item.description}}</view>
          <button 
            class="btn btn-primary btn-audio" 
            wx:if="{{item.hasAudioGuide}}" 
            bindtap="playAudioGuide" 
            data-id="{{item.id}}"
          >
            ğŸ§ å¬è®²è§£
          </button>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-timeline" wx:if="{{tripInfo.todaySegments && tripInfo.todaySegments.length === 0}}">
      <text class="empty-text">ä»Šæ—¥æš‚æ— è¡Œç¨‹å®‰æ’</text>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <view class="action-item" bindtap="goToAICompanion">
      <view class="action-icon">ğŸ¤–</view>
      <text class="action-text">AI æ—…ä¼´</text>
    </view>
    <view class="action-item" bindtap="goToSettings">
      <view class="action-icon">âš™ï¸</view>
      <text class="action-text">è®¾ç½®</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ±‚åŠ©æŒ‰é’® -->
  <view class="help-button" bindtap="requestHelp">
    <text class="help-text">ğŸ†˜ æˆ‘éœ€è¦å¸®åŠ©</text>
  </view>
</scroll-view>
